<html>
    <head>
        <script>
            // See https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL#preparing_the_webgl_context

            function setupShader(gl, sourceId, shaderType) {
                const source = document.getElementById(sourceId).innerHTML;
                const shader = gl.createShader(shaderType);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);

                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    throw new Error(`Error compiling "${sourceId}": ${gl.getShaderInfoLog(shader)}`);
                }
                return shader;
            }

            function initCanvas(canvasId) {
                const canvas = document.getElementById(canvasId);

                // See https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext
                const gl = canvas.getContext("webgl");

                gl.clearColor(0, 0, 0, 1);
                gl.clear(gl.COLOR_BUFFER_BIT);

                const vertexShader = setupShader(gl, "viewport-vertex", gl.VERTEX_SHADER);
                const fragmentShader = setupShader(gl, "fragment-shader", gl.FRAGMENT_SHADER);

                const program = gl.createProgram();
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.linkProgram(program);
                gl.useProgram(program);

                gl.drawArrays(gl.POINTS, 0, 1);
            }
        </script>

        <script type="x-shader/x-vertex" id="viewport-vertex">
            #version 100

            void main() {
                gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
                gl_PointSize = 64.0;
            }
        </script>
        <script type="x-shader/x-fragment" id="fragment-shader">
            #version 100

            void main() {
                gl_FragColor = vec4(0.0, 0.5, 1.0, 0.75);
            }
        </script>
    </head>
    <body>
        <canvas id="hypnobrot">

        </canvas>
        <script>
            initCanvas("hypnobrot");
        </script>
    </body>
</html>